
   // data.forEach (element => {
     console.log(element.imageUrl)
    })//
    // Récupération de la liste des produits et de leurs détails, depuis l'API.
async function getItems() {
    try {
        const res = await fetch("http://localhost:3000/api/products");
        const items = await res.json();
        return items;
    }
    catch (error) {
        console.log("Erreur: " + error);
    };
}

// Modification du DOM pour faire apparaitre les produits.
function showItem(item) {
    document.querySelector("#items").innerHTML += `
        <a href="./product.html?id=${item._id}">
            <article>
                <img src="${item.imageUrl}" alt="${item.altTxt}">
                <h3 class="productName">${item.name}</h3>
                <p class="productDescription">${item.description}</p>
            </article>
        </a>`;
}

// Rendu dynamique de la liste des produits.
(async function renderProducts() {
    const items = await getItems();
    items.forEach(item => {
        showItem(item)
    });
})()







function addProducts(canape) {
    let id = canape._id
    let imageUrl = canape.imageUrl
    let altTxt = canape.altTxt
    let name = canape.name
    let description = canape.description
    
    canape.forEach(canape => {
    console.log("canape: ", canape)
    let image = makeImage(imageUrl, altTxt)
    let anchor = makeAnchor(id)
    let article = makeArticle()
    let h3 = makeH3(name)
    let p = makeParagraph(description)
    
    appendElementsToArticle(article, image, h3, p)
    appendArticleToAnchor(anchor, article)
})
}

function appendElementsToArticle(article, image, h3, p) {

    article.appendChild(image)
    article.appendChild(h3)
    article.appendChild(p)
}
function makeAnchor(id) {
     let anchor = document.createElement("a") 
     anchor.href = "./product.html?id=" +                                                                                                                                                                                                                                                                                id
     return anchor
}

function appendArticleToAnchor(anchor, article) {
    let items = document.querySelector("#items")
    if (items != null) {
        items.appendChild(anchor)
        anchor.appendChild(article)
        console.log("éléments ajoutés à items", items)
    }
}
function makeImage(imageUrl, altTxt) {
    let image = document.createElement("img")
    image.src = imageUrl
    image.alt = altTxt
    return image
}

function makeArticle() {
    let article = document.createElement("article")
    let h3 = makeH3()
    console.log(article)
    return article 
}
function makeH3(name) {
    let h3= document.createElement("h3")
    h3.textContent = name
    h3.classList.add("productName")
    return h3
}
function makeParagraph(description) {
    let p = document.createElement("p")
    p.textContent = description
    p.classList.add("productDescription")
    return p
}
